<!doctype html>
<!--
Copyright 2025 Asher Buk
SPDX-License-Identifier: Apache-2.0
https://github.com/AshBuk/FingerGo
-->
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>FingerGo</title>
        <link rel="stylesheet" href="styles/main.css" />
        <link rel="stylesheet" href="styles/modals.css" />
        <link rel="stylesheet" href="styles/keyboard.css" />
        <link rel="stylesheet" href="styles/library.css" />
        <link id="theme-css" rel="stylesheet" href="styles/theme-dark.css" />
    </head>
    <body class="theme-dark">
        <div id="app" class="theme-dark">
            <div id="top-action-bar" role="region" aria-label="Quick actions">
                <button
                    id="theme-toggle"
                    class="top-action-button"
                    aria-label="Toggle theme"
                    title="Toggle theme"
                    type="button"
                >
                    üåô
                </button>
                <button
                    id="color-settings"
                    class="top-action-button"
                    aria-label="Color settings"
                    title="Customize colors"
                    type="button"
                >
                    üé®
                </button>
                <button
                    id="zen-toggle"
                    class="top-action-button"
                    aria-label="Toggle Zen mode"
                    title="Toggle Zen mode (Ctrl+Alt+Z)"
                    type="button"
                >
                    üßò
                </button>
                <button
                    id="stats-toggle"
                    class="top-action-button"
                    aria-label="Toggle stats bar"
                    title="Toggle stats bar (Ctrl+Alt+S)"
                    type="button"
                >
                    üìä
                </button>
                <button
                    id="keyboard-toggle"
                    class="top-action-button"
                    aria-label="Toggle keyboard"
                    title="Toggle keyboard (Ctrl+Alt+K)"
                    type="button"
                >
                    ‚å®Ô∏è
                </button>
                <button
                    id="strict-mode-toggle"
                    class="top-action-button"
                    aria-label="Toggle strict mode"
                    title="Toggle strict mode (require backspace for errors)"
                    aria-pressed="false"
                    type="button"
                >
                    üéØ
                </button>
                <button
                    id="reset-session"
                    class="top-action-button"
                    aria-label="Reset session"
                    title="Reset session (Ctrl+Alt+R)"
                    type="button"
                >
                    ‚Üª
                </button>
            </div>
            <!-- Text Display Area -->
            <section id="text-area">
                <div id="text-display"></div>
                <textarea
                    id="text-input"
                    aria-label="Typing input"
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                ></textarea>
            </section>

            <!-- Statistics Bar (moved out of #keyboard to keep visible) -->
            <section id="stats-bar">
                <div class="stat-item">
                    <span class="stat-label">WPM</span>
                    <span class="stat-value" id="wpm">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">CPM</span>
                    <span class="stat-value" id="cpm">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Accuracy</span>
                    <span class="stat-value" id="accuracy">100%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Time</span>
                    <span class="stat-value" id="timer">00:00</span>
                </div>
            </section>

            <!-- Keyboard Section -->
            <section id="keyboard-section">
                <div id="keyboard">
                    <!-- Keyboard will be generated by JavaScript -->
                </div>
            </section>

            <!-- Library Controls (right edge) -->
            <div id="library-controls" role="region" aria-label="Library controls">
                <button
                    id="library-toggle"
                    aria-label="Library"
                    title="Library (Ctrl+Alt+L)"
                    type="button"
                >
                    üìö
                </button>
                <button
                    id="text-add"
                    aria-label="Add New"
                    title="Add New (Ctrl+Alt+N)"
                    type="button"
                >
                    üìÅ
                </button>
                <button
                    id="layout-toggle"
                    aria-label="Keyboard layout"
                    title="Keyboard layout (Ctrl+,)"
                    type="button"
                >
                    üåê
                </button>
            </div>

            <!-- Library Sidebar (slide-in panel) -->
            <aside id="library-sidebar" aria-label="Library">
                <header class="sidebar-header">
                    <h3>Library</h3>
                    <button id="sidebar-close" aria-label="Close sidebar">‚úï</button>
                </header>
                <div class="sidebar-content">
                    <nav id="category-tree">
                        <!-- Generated by library.js -->
                    </nav>
                    <div id="text-list">
                        <!-- Generated by library.js -->
                    </div>
                </div>
            </aside>

            <!-- GitHub Link -->
            <a id="github-link" href="#" aria-label="View on GitHub" title="View on GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                    />
                </svg>
            </a>

            <!-- Modal Overlay -->
            <div id="modal-overlay" class="modal-hidden">
                <div id="modal-container">
                    <div id="modal-header">
                        <h2 id="modal-title"></h2>
                        <button id="modal-close" aria-label="Close modal" tabindex="-1">‚úï</button>
                    </div>
                    <div id="modal-content">
                        <!-- Dynamic content injected by modals.js -->
                    </div>
                </div>
            </div>
        </div>

        <script src="wailsjs/wailsjs/runtime/runtime.js"></script>
        <!-- Event system: must load first as all modules depend on it -->
        <script src="js/events.js"></script>
        <!-- Constants: application-wide shared values -->
        <script src="js/constants.js"></script>
        <!-- Utility functions: key normalization (used by keyboard, typing, app) -->
        <script src="js/utils.js"></script>
        <!-- Keyboard layouts: load individual layouts before registry -->
        <script src="js/layouts/en-qwerty.js"></script>
        <script src="js/layouts/en-dvorak.js"></script>
        <!-- <script src="js/layouts/ru-jcuken.js"></script> -->
        <!-- <script src="js/layouts/de-qwertz.js"></script> -->
        <script src="js/layouts.js"></script>
        <script src="js/keyboard.js"></script>
        <script src="js/typing.js"></script>
        <!-- Modal system: core first, then type-specific renderers -->
        <script src="js/modals/core.js"></script>
        <script src="js/modals/session-summary.js"></script>
        <script src="js/modals/color-settings.js"></script>
        <script src="js/modals/text-editor.js"></script>
        <script src="js/modals/error.js"></script>
        <script src="js/modals/settings.js"></script>
        <script src="js/ui.js"></script>
        <script src="js/stats.js"></script>
        <script src="js/colors.js"></script>
        <!-- Settings, session, library, shortcuts: modular architecture -->
        <script src="js/settings.js"></script>
        <script src="js/session.js"></script>
        <script src="js/library.js"></script>
        <script src="js/shortcuts.js"></script>
        <script src="js/app.js"></script>
    </body>
</html>
